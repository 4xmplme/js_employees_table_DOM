function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,void 0);var a=Object.prototype.toString.call(t).slice(8,-1);if("Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n=document.querySelector("table"),a=n.tHead,r=n.tBodies[0],o=t(a.rows[0].cells),i=t(r.rows),l=document.querySelector("body"),c=document.createElement("form"),u=document.createElement("label"),s=document.createElement("label"),m=document.createElement("label"),d=document.createElement("label"),p=document.createElement("label"),f=document.createElement("input"),v=document.createElement("input"),y=document.createElement("select"),g=document.createElement("input"),E=document.createElement("input"),b=document.createElement("button"),x=null,h=null;function C(e){return e[0].toUpperCase()+e.slice(1)}function L(e){return+e.replace(/\D/g,"")}function q(e){return"$"+e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}function S(e,t){t.forEach(function(t){var n=document.createElement("option");n.value=t,n.textContent=t,e.append(n)})}function k(e){switch(e.value=e.value.trim(),e.name){case f.name:if(e.value.length<4)return w("error","Name must contain at least 4 letters"),!1;break;case v.name:if(e.value.length<4)return w("error","Possition must contain at least 4 letters"),!1;break;case g.name:if(e.value<18||e.value>80)return w("error","Age must be between 18 and 80 inclusively"),!1}return!0}function w(e,t){var n=document.createElement("div"),a=document.createElement("span");n.classList.add("notification",e),n.dataset.qa="notification",a.classList.add("title"),a.textContent=t,n.append(a),l.append(n),setTimeout(function(){return n.remove()},5e3)}var A=[{name:"name",type:"text","data-qa":"name",origin:f},{name:"position",type:"text","data-qa":"position",origin:v},{name:"office",type:"select","data-qa":"office",origin:y,options:["Tokyo","Singapore","London","New York","Edinburgh","San Francisco"]},{name:"age",type:"number","data-qa":"age",origin:g},{name:"salary",type:"number","data-qa":"salary",origin:E}];o.forEach(function(e){e.addEventListener("click",function(){if(x===e)i.reverse();else{var n;n=o.indexOf(e),i.sort(function(t,a){var r=t.cells[n].textContent,o=a.cells[n].textContent;switch(e.textContent){case"Name":case"Position":default:return r.localeCompare(o);case"Age":case"Salary":return L(r)-L(o)}}),x=e}r.append.apply(r,t(i))})}),i.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("active"),h&&h!==e&&h.classList.remove("active"),h=h&&h===e?null:e})}),A.forEach(function(e){e.origin.name=e.name,e.origin.dataset.qa=e["data-qa"],"select"===e.type?S(A[2].origin,A[2].options):e.origin.type=e.type}),b.textContent="Save to table",b.type="submit",u.append(C(f.name),f),s.append(C(v.name),v),m.append(C(y.name),y),d.append(C(g.name),g),p.append(C(E.name),E),c.classList.add("new-employee-form"),c.append(u,s,m,d,p,b),c.addEventListener("submit",function(e){e.preventDefault();var t=l.querySelector(".notification");t&&t.remove();for(var n=0;n<c.elements.length-1;n++){var a=c[n];if(!a.value)return w("error","".concat(C(a.name)," is required"));if(!k(a))return}for(var o=document.createElement("tr"),i=0;i<c.elements.length-1;i++){var u=c[i],s=document.createElement("td"),m=u.value;s.textContent=m,u===E&&(s.textContent=s.textContent.replace(/\B(?=(\d{3})+(?!\d))/g,",")),u.name===E.name&&(m=q(u.value)),s.textContent=m,o.append(s)}return r.append(o),c.reset(),w("success","New employee is successfully added to the table")}),l.append(c),r.addEventListener("dblclick",function(e){if(e.preventDefault(),"TD"===e.target.tagName){var t,n,a,r,o,i;n=(t=e.target).textContent,a=t.cellIndex,r=document.createElement(2===t.cellIndex?"select":"input"),o=!1,i=function(){o||(o=!0,r.value||(r.remove(),t.textContent="salary"===r.type?q(n):n),k(r)&&(r.remove(),t.textContent="salary"===r.name?q(r.value):r.value),o=!1)},r.classList.add("cell-input"),r.name=A[a].name,"select"===A[a].type?S(r,A[a].options):r.type=A[a].type,r.value="salary"===r.name?L(n):n,r.addEventListener("blur",function(e){e.preventDefault(),i()}),r.addEventListener("keypress",function(e){"Enter"===e.key&&(e.preventDefault(),i())}),t.textContent="",t.append(r),r.focus()}});
//# sourceMappingURL=index.ae03fa3b.js.map
